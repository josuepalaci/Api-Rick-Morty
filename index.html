<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- CSS only -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>ejemplo api</title>
  </head>
  <body>
    
      <div class="container my-5 text-center" >
        <!-- <input type="button" name="num" id="num" class="btn btn-dark w-10" value=""> -->
        <input type="button" class="btn btn-dark w-15" id="prev" value="prev">
        <input type="button" class="btn btn-danger w-70" id="btn" value="traer">
        <input type="button" class="btn btn-dark w-15" id="next" value="next">
        <div class="mt-5" >
            <ul class="list-group" id="contenido"></ul>
        </div>
    </div>

    <script>
    var contenido = document.querySelector('#contenido');
    var btn = document.querySelector('#btn');
    var prev = document.querySelector('#prev');
    var next = document.querySelector('#next');
    const URL = 'https://rickandmortyapi.com/api/character/';
    var urlG = '';
    var urlPrev = '';   
    var urlNext = '';
    

    
    fetch(URL)
    .then(response => response.json())
    .then(json => {
            for(var i = 0; i < 20; i++) {
            contenido.innerHTML += `
                <li class="list-group-item">
                <p>Nombre: ${json.results[i].name}</p>
                <img src="${json.results[i].image}" class="img-fluid rounded-circle" width="100px" alt="">
                </li>
            `;};
        urlNext = json.info.next;
        });
        urlG = URL;
        btn.value='limpiar';
        prev.style.display = "none";
    


    btn.addEventListener('click', () =>{
        if(btn.value=='traer'){
            fetch(urlG)
            .then(response => response.json())
            .then(json => {
                    for(var i = 0; i < 20; i++) {
                    contenido.innerHTML += `
                        <li class="list-group-item">
                        <p>Nombre: ${json.results[i].name}</p>
                        <img src="${json.results[i].image}" class="img-fluid rounded-circle" width="100px" alt="">
                        </li>
                    `;}
                urlNext = json.info.next;
                urlPrev = json.info.prev;  
                });
                btn.value='limpiar';
        } else {
                contenido.innerHTML = '';
                btn.value='traer';
        }
    });  

    prev.addEventListener('click',()=>{
            
        if(urlPrev == null){
        contenido.innerHTML=`
                <li class="list-group-item">
                <p> No hay pag anteriones </p>
                </li>`;
        } else {
            fetch(urlPrev)
            .then(response => response.json())
            .then(json => {
                contenido.innerHTML='';
                refresh(urlPrev);
                btn.value = 'limpiar'
                urlG = urlPrev;
                urlNext = json.info.next;
                urlPrev = json.info.prev;
            });
        }
    });

    next.addEventListener('click',()=>{
        urlG = urlNext;
        prev.style.display = "initial";
        fetch(urlNext)
            .then(response => response.json())
            .then(json => {
                contenido.innerHTML='';
                refresh(urlNext);
                urlPrev = json.info.prev;
                urlNext = json.info.next;
                btn.value = 'limpiar';
            });
    });
    
    function refresh($var){
        fetch($var)
        .then(response => response.json())
        .then(json => {
                for(var i = 0; i < 20; i++) {
                contenido.innerHTML += `
                    <li class="list-group-item">
                    <p>Nombre: ${json.results[i].name}</p>
                    <img src="${json.results[i].image}" class="img-fluid rounded-circle" width="100px" alt="">
                    </li>
                `;}
        });
    }

    </script>

  </body>
</html>